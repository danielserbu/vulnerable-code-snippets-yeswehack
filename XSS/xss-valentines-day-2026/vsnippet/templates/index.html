<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Will you be my valentine?</title>

    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link rel="stylesheet" href="/assets/css/styles.css" />
  </head>

  <body
    class="min-h-screen bg-gradient-to-br from-rose-50 via-pink-50 to-red-50 text-slate-800"
  >
    <div class="relative overflow-hidden">
      <div
        class="absolute -top-24 -left-24 h-72 w-72 rounded-full bg-pink-200/50 blur-3xl"
      ></div>
      <div
        class="absolute -bottom-24 -right-24 h-72 w-72 rounded-full bg-rose-200/50 blur-3xl"
      ></div>

      <main
        class="relative mx-auto flex min-h-screen max-w-3xl items-center px-4 py-10"
      >
        <div class="w-full">
          <header class="text-center">
            <div
              class="mx-auto inline-flex items-center gap-2 rounded-full bg-white/70 px-4 py-2 ring-1 ring-black/5 backdrop-blur"
            >
              <span class="text-lg">ðŸ’Œ</span>
              <span class="text-sm font-medium text-slate-700"
                >A little love letter</span
              >
            </div>

            <h1
              class="mt-6 text-balance text-4xl font-extrabold tracking-tight text-rose-700 sm:text-5xl"
            >
              will you be my valentine?
            </h1>

            <p class="mt-3 text-pretty text-sm text-slate-600 sm:text-base">
              Write your message, hit submit, and share the moment.
            </p>
          </header>

          <section class="mt-8">
            <div
              class="paper relative rounded-3xl border border-white/60 p-6 shadow-xl shadow-rose-100/70 ring-1 ring-black/5 sm:p-8"
            >
              <div
                class="shine pointer-events-none absolute inset-0 rounded-3xl bg-white/30"
              ></div>

              <div class="flex items-start justify-between gap-4">
                <div>
                  <p class="text-sm font-semibold text-slate-700">
                    Dear Valentine,
                  </p>
                  <p class="mt-1 text-sm text-slate-600">
                    I wanted to tell you somethingâ€¦
                  </p>
                </div>
                <div class="select-none text-2xl">ðŸ’—</div>
              </div>

              <form id="loveForm" class="mt-6 space-y-4">
                <label class="block">
                  <span class="mb-2 block text-sm font-medium text-slate-700"
                    >Your message</span
                  >
                  <div id="message"></div>
                  <div
                    class="mt-2 flex items-center justify-between text-xs text-slate-500"
                  >
                    <span id="hint">Keep it short and heartfelt.</span>
                    <span><span id="count">0</span>/420</span>
                  </div>
                </label>

                <div
                  class="flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between"
                >
                  <button
                    type="submit"
                    class="group inline-flex items-center justify-center gap-2 rounded-2xl bg-rose-600 px-5 py-3 text-sm font-semibold text-white shadow-lg shadow-rose-200/70 ring-1 ring-black/5 transition active:scale-[0.98] hover:bg-rose-700 focus:outline-none focus:ring-2 focus:ring-rose-300"
                  >
                    <span>Submit</span>
                    <span class="transition group-hover:translate-x-0.5"
                      >â†’</span
                    >
                  </button>

                  <button
                    type="button"
                    id="copyBtn"
                    class="inline-flex items-center justify-center gap-2 rounded-2xl bg-white/80 px-5 py-3 text-sm font-semibold text-slate-700 shadow-sm ring-1 ring-black/5 transition hover:bg-white focus:outline-none focus:ring-2 focus:ring-rose-200"
                  >
                    <span>Copy letter</span>
                    <span>ðŸ“‹</span>
                  </button>
                </div>
              </form>

              <div class="mt-6 rounded-2xl bg-white/60 p-4 ring-1 ring-black/5">
                <div class="flex items-center justify-between">
                  <p class="text-sm font-semibold text-slate-700">Preview</p>
                  <span id="status" class="text-xs text-slate-500"
                    >Not submitted yet</span
                  >
                </div>
                <div
                  class="mt-3 whitespace-pre-wrap text-sm leading-relaxed text-slate-700"
                  id="preview"
                >
                  Your message will appear here.
                </div>
                <div class="mt-4 text-sm font-semibold text-slate-700">
                  Love, <span class="text-rose-700">Me</span>
                </div>
              </div>
            </div>
          </section>

          <footer class="mt-6 text-center text-xs text-slate-500">
            Made with love!
          </footer>
        </div>

        <div
          id="heartsLayer"
          class="pointer-events-none absolute inset-0"
        ></div>
      </main>
    </div>

    <script src="/assets/js/main.js"></script>
    <script>
      (function applyMessageParam() {
        const elem = document.getElementById("message");
        if (!elem) return;

        const params = new URLSearchParams(window.location.search);
        const msg = params.get("message");
        if (msg === null) return;

        elem.innerHTML = `<textarea
        class="w-full resize-none rounded-2xl border px-4 py-3 ring-black/5 text-slate-800 border-white/70 bg-white/70 shadow-sm outline-none ring-1 placeholder:text-slate-400 focus:border-rose-300 focus:ring-2 focus:ring-rose-200">
        ${msg}
        </textarea>`;

        elem.dispatchEvent(
          new Event("input", { bubbles: true })
        );
      })();
    </script>
  </body>
</html>
